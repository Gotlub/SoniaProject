{% extends 'base.html.twig' %}

{% block title %} {{client.nom ~ ' ' ~ client.prenom}} {% endblock %}

{% block body %}
    <div class="container mt-4">
        <h1>{{ client.nom ~ ' ' ~ client.prenom }} </h1>
        <hr class="my-4">
        <br/>
        <p>Information client :</p>
        <div class="jumbotron">
             <table class="table">
                <tbody>
                    <tr>
                        <th>Nom : </th>
                        <td>{{ client.nom  }}</td>
                    </tr>
                    <tr>
                        <th>Prénom :</th>
                        <td>{{ client.prenom }}</td>
                    </tr>
                    <tr>
                        <th>Adresse de facturation :</th>
                        <td>{{ client.adresseFacturation }}</td>
                    </tr>
                    <tr>
                        <th>Code postal de facturation :</th>
                        <td>{{ client.communeFacturation }}</td>
                    </tr>
                    <tr>
                        <th>E-mail client :</th>
                        <td>{{ client.mail }}</td>
                    </tr>
                    <tr>
                        <th>Téléphone client :</th>
                        <td>{{ client.tel }}</td>
                    </tr>
                    <tr>
                        <th>Adresse client :</th>
                        <td>{{ client.adresseClient }}</td>
                    </tr>
                    <tr>
                        <th>Code postal client :</th>
                        <td>{{ client.cpClient  }}</td>
                    </tr>
                    <tr>
                        <th>Date du dernier rdv</th>
                        <td>{{ client.dernierRdv.dateControle|date('d/m/y') }}</td>
                    </tr>
                </tbody>
            </table>
            <br/>
            <hr class="my-4">
            <h2>Rendez vous du client: </h3>
            <table style="width: 100;" class="table table-striped table-condensed">
                <thead>
                    <tr>
                        <th class="text-left align-top" scope="col">Date de contrôle
                        </th>
                        <th  class="text-left align-top" scope="col">Status Facturation
                        </th>
                        <th  class="text-left align-top" scope="col">Status Dossier
                        </th>
                        <th class="text-left align-top" scope="col">Type du contrôle
                        </th>
                        <th class="text-left align-top" scope="col">N°Dossier
                        </th>
                        <th  class="text-left align-top" scope="col">Client
                        </th>
                        <th  class="text-left align-top" scope="col">Adresse
                        </th>
                        <th class="text-left align-top" scope="col">Commune
                        </th>
                        <th class="text-left align-top" scope="col">Cadastre S
                        </th>
                        <th class="text-left align-top" scope="col">Prochaine visite</th>
                    </tr>
                </thead>
                <tbody>
                {% for rdv in client.rendezVous %}
                    <tr>
                        <td><a href="{{ path('rdv.showone', { 'id': rdv.id }) }}" class="link-white">{{ rdv.dateControle|date('d/m/Y') }}</a></td>
                        <td><a href="{{ path('rdv.showone', { 'id': rdv.id }) }}" class="link-white">{{ rdv.status }}</a></td>
                        <td><a href="{{ path('rdv.showone', { 'id': rdv.id }) }}" class="link-white">{{ rdv.statusDossier }}</a></td>
                        <td><a href="{{ path('rdv.showone', { 'id': rdv.id }) }}" class="link-white">{{ rdv.typeControle }}</a></td>
                        <td><a href="{{ path('rdv.showone', { 'id': rdv.id }) }}" class="link-white">{{ rdv.numDossier }}</a></td>
                        <td><a href="{{ path('client.showone', { 'id': rdv.client.id }) }}" class="link-white">{{ rdv.client.nom ~ ' ' ~ rdv.client.prenom }}</a></td>
                        <td><a href="{{ path('adresse.showone', { 'id': rdv.adresse.id }) }}" class="link-white">{{ rdv.Adresse.adresseVisite ~ ' ' ~ rdv.Adresse.cp}}</a></td>
                        <td>{{ rdv.Adresse.commune }}</td>
                        <td>{{ rdv.Adresse.sectionCadastrale }}</td>
                        <td>{{ (rdv.Adresse.prochaineVisite == null ) ? 'Non renseigné ' :  rdv.Adresse.prochaineVisite|date('d/m/Y') }}</td>
                        <td></td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="12">no records found</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <br/>
        
        </div>
    </div>
{% endblock %}